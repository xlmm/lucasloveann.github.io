<!DOCTYPE html>
<html lang="cn"><head><meta charset="utf-8">
<meta http-equiv="content-type" content="text/html">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title itemprop="name">lucas | Lucas_blog</title>
<meta property="og:title" content="lucas | Lucas_blog" />
<meta name="twitter:title" content="lucas | Lucas_blog" />
<meta itemprop="name" content="lucas | Lucas_blog" />
<meta name="application-name" content="lucas | Lucas_blog" />
<meta property="og:site_name" content="Lucas_blog" />

<meta name="description" content="博客搭建教程">
<meta itemprop="description" content="博客搭建教程" />
<meta property="og:description" content="博客搭建教程" />
<meta name="twitter:description" content="博客搭建教程" />

<meta property="og:locale" content="cn" />
<meta name="language" content="cn" />

  <link rel="alternate" hreflang="cn" href="https://xlmm.github.io/lucasloveann.github.io/posts/lucas/hugo--%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/" title="Chinese" />



  <meta itemprop="image" content="https://xlmm.github.io/lucasloveann.github.io/" />
  <meta property="og:image" content="https://xlmm.github.io/lucasloveann.github.io/" />
  <meta name="twitter:image" content="https://xlmm.github.io/lucasloveann.github.io/" />
  <meta name="twitter:image:src" content="https://xlmm.github.io/lucasloveann.github.io/" />




    
    
    
    

    <meta property="og:type" content="article" />
    <meta property="og:article:published_time" content=2023-12-17T00:00:00Z />
    <meta property="article:published_time" content=2023-12-17T00:00:00Z />

    

    

    <script defer type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "Article",
        "headline": "lucas",
        "author": {
        "@type": "Person",
        "name": ""
        },
        "datePublished": "2023-12-17",
        "description": "博客搭建教程",
        "wordCount":  671 ,
        "mainEntityOfPage": "True",
        "dateModified": "2023-12-17",
        "image": {
        "@type": "imageObject",
        "url": ""
        },
        "publisher": {
        "@type": "Organization",
        "name": "Lucas_blog"
        }
    }
    </script>


<meta name="generator" content="Hugo 0.121.1">

    

    <link rel="canonical" href="https://xlmm.github.io/lucasloveann.github.io/posts/lucas/hugo--%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/">
    <link href="/lucasloveann.github.io/style.min.930fc580ca1918260e91a9bbb9e921e04e4b9a0a00f48d181168058e25dbbe97.css" rel="stylesheet">
    <link href="/lucasloveann.github.io/code-highlight.min.706d31975fec544a864cb7f0d847a73ea55ca1df91bf495fd12a177138d807cf.css" rel="stylesheet">

    
    <link rel="apple-touch-icon" sizes="180x180" href="/lucasloveann.github.io/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/lucasloveann.github.io/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/lucasloveann.github.io/icons/favicon-16x16.png">
    <link rel="mask-icon" href="/lucasloveann.github.io/icons/safari-pinned-tab.svg">
    <link rel="shortcut icon" href="/lucasloveann.github.io/favicon.ico">




<link rel="manifest" href="https://xlmm.github.io/lucasloveann.github.io/site.webmanifest">

<meta name="msapplication-config" content="/lucasloveann.github.io/browserconfig.xml">
<meta name="msapplication-TileColor" content="#2d89ef">
<meta name="theme-color" content="#434648">

    
    <link rel="icon" type="image/svg+xml" href="/lucasloveann.github.io/icons/favicon.svg">

    
    </head>
<body data-theme = "dark" class="notransition">

<script src="/lucasloveann.github.io/js/theme.min.8961c317c5b88b953fe27525839672c9343f1058ab044696ca225656c8ba2ab0.js" integrity="sha256-iWHDF8W4i5U/4nUlg5ZyyTQ/EFirBEaWyiJWVsi6KrA="></script>

<div class="navbar" role="navigation">
    <nav class="menu" aria-label="Main Navigation">
        <a href="https://xlmm.github.io/lucasloveann.github.io/" class="logo">
            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" 
viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="feather feather-home">
<title></title>
<path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
<polyline points="9 22 9 12 15 12 15 22"></polyline>
</svg>
        </a>
        <input type="checkbox" id="menu-trigger" class="menu-trigger" />
        <label for="menu-trigger">
            <span class="menu-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" stroke="currentColor" fill="none" viewBox="0 0 14 14"><title>Menu</title><path stroke-linecap="round" stroke-linejoin="round" d="M10.595 7L3.40726 7"></path><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 3.51488L3.49301 3.51488"></path><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 10.4851H3.49301"></path><path stroke-linecap="round" stroke-linejoin="round" d="M0.5 12.5V1.5C0.5 0.947715 0.947715 0.5 1.5 0.5H12.5C13.0523 0.5 13.5 0.947715 13.5 1.5V12.5C13.5 13.0523 13.0523 13.5 12.5 13.5H1.5C0.947715 13.5 0.5 13.0523 0.5 12.5Z"></path></svg>
            </span>
        </label>

        <div class="trigger">
            <ul class="trigger-container">
                
                
                <li>
                    <a class="menu-link " href="/lucasloveann.github.io/">
                        主页
                    </a>
                    
                </li>
                
                <li>
                    <a class="menu-link active" href="/lucasloveann.github.io/posts/">
                        文章
                    </a>
                    
                </li>
                
                <li>
                    <a class="menu-link " href="/lucasloveann.github.io/pages/about/">
                        关于
                    </a>
                    
                </li>
                
                <li class="menu-separator">
                    <span>|</span>
                </li>
                
                
            </ul>
            <a id="mode" href="#">
                <svg xmlns="http://www.w3.org/2000/svg" class="mode-sunny" width="21" height="21" viewBox="0 0 14 14" stroke-width="1">
<title>LIGHT</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></circle><line x1="7" y1="0.5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="0.5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line></g></svg>
                <svg xmlns="http://www.w3.org/2000/svg" class="mode-moon" width="21" height="21" viewBox="0 0 14 14" stroke-width="1">
<title>DARK</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></circle><line x1="7" y1="0.5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="0.5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line></g></svg>
            </a>
        </div>
    </nav>
</div>

<div class="wrapper post">
    <main class="page-content" aria-label="Content">
        <article>
            <header class="header">
                <h1 class="header-title">lucas</h1>
                
                
                <div class="post-meta">
                    <time datetime="2023-12-17T00:00:00&#43;00:00" itemprop="datePublished"> Dec 17, 2023 </time>
                </div>
                
            </header>
            
    
    <details class="toc" ZgotmplZ>
        <summary><b></b></summary>
        <nav id="TableOfContents">
  <ul>
    <li><a href="#背景">背景</a></li>
    <li><a href="#环境">环境</a>
      <ul>
        <li><a href="#windows以这个为例子">Windows（以这个为例子）</a></li>
      </ul>
    </li>
    <li><a href="#本地">本地</a>
      <ul>
        <li><a href="#创建一个新的-blog">创建一个新的 blog</a></li>
        <li><a href="#进入刚刚创建好的博客文件夹中">进入刚刚创建好的博客文件夹中</a></li>
        <li><a href="#给博客加个主题">给博客加个主题</a></li>
      </ul>
    </li>
    <li><a href="#发布">发布</a></li>
    <li><a href="#自动">自动</a></li>
  </ul>
</nav>
    </details>
            <div class="page-content">
                <h2 id="背景">背景</h2>
<p><img src="https://lucas-1317635493.cos.ap-nanjing.myqcloud.com/obsidian%E5%9B%BE%E5%BA%8A/20231217144947.png" alt="image.png|300"></p>
<p><a href="https://gohugo.io/">Hugo</a> 是用 Go 实现的博客工具，采用 Markdown 进行文章编辑，自动生成静态站点文件，支持丰富的主题配置，也可以通过 js 嵌入像是评论系统等插件，高度定制化。当然还有很多其他的，如 notion ，WordPress 等等，我喜欢 hugo 的主题，且最简单「侧重内容输出而不是网站维护」。</p>
<p>上篇文章分享之后，有同学好奇如何搭建，问的比较多，我就简单的花半小时整理下，为了方便自己，做个记录，也方便大家，在这个人人都可以发声的时代，又感觉人人的喉咙都被扼住了，所以有兴趣可以搞起来吧。</p>
<p>本次我整理一个免费的教程，不用花一分钱，和域名，代理什么都不需要，也就是github 版本，利用 github pages 的免费 host 和自动部署功能，大家按照如下步骤，可以在 20 分钟内搭建出来。</p>
<h2 id="环境">环境</h2>
<h3 id="windows以这个为例子">Windows（以这个为例子）</h3>
<p>需要：git 包管理，hugo 预编译文件，Node.js, vscode(推荐)</p>
<p>git 包管理：
<a href="https://git-scm.com/downloads">Git - Downloads</a>
<img src="https://lucas-1317635493.cos.ap-nanjing.myqcloud.com/obsidian%E5%9B%BE%E5%BA%8A/20231217145558.png" alt="image.png|300"></p>
<p>Node. Js
<a href="https://nodejs.org/en/download/current">Download | Node.js</a>
<img src="https://lucas-1317635493.cos.ap-nanjing.myqcloud.com/obsidian%E5%9B%BE%E5%BA%8A/20231217145634.png" alt="image.png|300"></p>
<p>安装环境后，然后可以打开终端，输入 CMD，找到 powershell，然后按照下面的步骤进行构建。</p>
<p>我使用 scoop 进行安装 hugo 的 extension 版本</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">scoop install hugo-extended
</span></span></code></pre></div><p>安装完之后，就可以看到当前的版本了</p>
<p><img src="https://lucas-1317635493.cos.ap-nanjing.myqcloud.com/obsidian%E5%9B%BE%E5%BA%8A/20231217150206.png" alt="image.png|300"></p>
<h2 id="本地">本地</h2>
<h3 id="创建一个新的-blog">创建一个新的 blog</h3>
<p>使用命令 <code>hugo new site</code> 来创建一个博客，例如，我用‘lucasloveann_blog ’这个名字可以根据自己的需要改</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">hugo new site lucasloveann_blog
</span></span></code></pre></div><h3 id="进入刚刚创建好的博客文件夹中">进入刚刚创建好的博客文件夹中</h3>
<p>在命令行中使用<code>cd</code>命令</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">cd</span> lucasloveann_blog
</span></span></code></pre></div><h3 id="给博客加个主题">给博客加个主题</h3>
<p>把当前目录进行<strong>github仓库</strong>的初始化</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">git init  
</span></span></code></pre></div><p>我选择下载 hugo-blog-awesome 主题，并存放在 themes 文件夹中</p>
<blockquote>
<p>主题地址
<a href="https://themes.gohugo.io/themes/hugo-blog-awesome/">Hugo blog awesome | Hugo Themes</a></p>
</blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">git submodule add https://github.com/hugo-sid/hugo-blog-awesome.git themes/hugo-blog-awesome
</span></span></code></pre></div><p>把主题改为 hugo-blog-awesome</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="nv">theme</span> <span class="o">=</span> <span class="s2">&#34;hugo-blog-awesome&#34;</span> &gt;&gt; config.toml
</span></span></code></pre></div><blockquote>
<p>我们可以将主题仓库直接 <code>git clone</code> 下来进行使用，但这种方式有一些弊端，因为当之后自己对主题进行修改后，可能会与原主题产生一些冲突，不方便版本管理与后续更新，我之前踩了这个坑。所以后面我采用的是将原主题仓库 <code>fork</code> 到自己的账户，并使用 <code>git submodule</code> 方式进行仓库链接，这样后续可以对主题的修改进行单独维护。</p>
</blockquote>
<p>如果是 clone 了其他人的博客项目进行修改，则需要用以下命令进行初始化：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">git submodule update --init --recursive
</span></span></code></pre></div><p>如果需要同步主题仓库的最新修改，需要运行以下命令：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">git submodule update --remote
</span></span></code></pre></div><p>这时候，可以进入主题文件夹，进行预览</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">hugo server --themesDir ../..
</span></span></code></pre></div><p>建议，直接进入文件夹将 exampleSite 的内容全部复制到根目录上。我的是这个位置：</p>
<pre tabindex="0"><code>D:\lucasloveann_blog\themes\hugo-blog-awesome\exampleSite
</code></pre><p><img src="https://lucas-1317635493.cos.ap-nanjing.myqcloud.com/obsidian%E5%9B%BE%E5%BA%8A/20231217151127.png" alt="image.png|300"></p>
<p>然后放到根目录：</p>
<pre tabindex="0"><code>D:\lucasloveann_blog
</code></pre><p><img src="https://lucas-1317635493.cos.ap-nanjing.myqcloud.com/obsidian%E5%9B%BE%E5%BA%8A/20231217151242.png" alt="image.png|300"></p>
<p>都完成之后，就可以进行发布第一篇文章了</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">hugo new posts/blog-test.md
</span></span></code></pre></div><p>进行 ``</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">hugo sever
</span></span></code></pre></div><p><img src="https://lucas-1317635493.cos.ap-nanjing.myqcloud.com/obsidian%E5%9B%BE%E5%BA%8A/20231217151803.png" alt="image.png|300"></p>
<p>预览如下</p>
<p><img src="https://lucas-1317635493.cos.ap-nanjing.myqcloud.com/obsidian%E5%9B%BE%E5%BA%8A/20231217151832.png" alt="image.png|300"></p>
<p>具体后面如何修改，直接修改里面有一个 <code>config.toml</code> 上面的代码，就是前端展示了。</p>
<p><img src="https://lucas-1317635493.cos.ap-nanjing.myqcloud.com/obsidian%E5%9B%BE%E5%BA%8A/20231217152025.png" alt="image.png|300"></p>
<p>更改东西，在发布之前记得进行 hugo 一下</p>
<pre tabindex="0"><code>hugo
</code></pre><p>目的是将网站内容转化为 html，完成之后可以看到本地有一个 <code>public</code> 文件，上面就是 hugo 之后的内容</p>
<p>Hugo 默认会将生成的静态网页文件存放在 <code>public/</code> 目录下，我们可以通过将 <code>public/</code> 目录初始化为 git 仓库并关联我们的 <code>xlmm/lucasloveann_blog.github.io</code> 远程仓库来推送我们的网页静态文件。</p>
<p><img src="https://lucas-1317635493.cos.ap-nanjing.myqcloud.com/obsidian%E5%9B%BE%E5%BA%8A/20231217152406.png" alt="image.png|300"></p>
<h2 id="发布">发布</h2>
<p>进行发布到 github</p>
<p>先去 github 创建一个仓库，为了承接自己的本地文件。然后上传上去，也很简单。这个是我最终上传的样子。</p>
<p><img src="https://lucas-1317635493.cos.ap-nanjing.myqcloud.com/obsidian%E5%9B%BE%E5%BA%8A/20231217152137.png" alt="image.png|300"></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">初始化
</span></span><span class="line"><span class="cl">git init
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">查看变化
</span></span><span class="line"><span class="cl">git status
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">添加缓存
</span></span><span class="line"><span class="cl">git add .
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">提交缓存
</span></span><span class="line"><span class="cl">git commit -m <span class="s2">&#34;add test&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">创建分支
</span></span><span class="line"><span class="cl">git branch -M main
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">链接远程
</span></span><span class="line"><span class="cl">git remote add origin https://github.com/xlmm/lucasloveann.github.io
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">进行推送
</span></span><span class="line"><span class="cl">git push -u origin main
</span></span></code></pre></div><h2 id="自动">自动</h2>
<p>设置自动发布，就是当自己有新 post 的时候，可以自动提交到线上。</p>
<p>这里有完整步骤，我说关键的
<a href="https://gohugo.io/hosting-and-deployment/hosting-on-github/">Host on GitHub Pages | Hugo</a></p>
<p>创建自动文件</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">.github/workflows/hugo.yaml
</span></span></code></pre></div><p>将这些代码放上去这个文件 hugo. yaml</p>
<pre tabindex="0"><code># Sample workflow for building and deploying a Hugo site to GitHub Pages name: Deploy Hugo site to Pages on: # Runs on pushes targeting the default branch push: branches: - main # Allows you to run this workflow manually from the Actions tab workflow_dispatch: # Sets permissions of the GITHUB_TOKEN to allow deployment to GitHub Pages permissions: contents: read pages: write id-token: write # Allow only one concurrent deployment, skipping runs queued between the run in-progress and latest queued. # However, do NOT cancel in-progress runs as we want to allow these production deployments to complete. concurrency: group: &#34;pages&#34; cancel-in-progress: false # Default to bash defaults: run: shell: bash jobs: # Build job build: runs-on: ubuntu-latest env: HUGO_VERSION: 0.121.0 steps: - name: Install Hugo CLI run: | wget -O ${{ runner.temp }}/hugo.deb https://github.com/gohugoio/hugo/releases/download/v${HUGO_VERSION}/hugo_extended_${HUGO_VERSION}_linux-amd64.deb \ &amp;&amp; sudo dpkg -i ${{ runner.temp }}/hugo.deb - name: Install Dart Sass run: sudo snap install dart-sass - name: Checkout uses: actions/checkout@v4 with: submodules: recursive fetch-depth: 0 - name: Setup Pages id: pages uses: actions/configure-pages@v4 - name: Install Node.js dependencies run: &#34;[[ -f package-lock.json || -f npm-shrinkwrap.json ]] &amp;&amp; npm ci || true&#34; - name: Build with Hugo env: # For maximum backward compatibility with Hugo modules HUGO_ENVIRONMENT: production HUGO_ENV: production run: | hugo \ --gc \ --minify \ --baseURL &#34;${{ steps.pages.outputs.base_url }}/&#34; - name: Upload artifact uses: actions/upload-pages-artifact@v2 with: path: ./public # Deployment job deploy: environment: name: github-pages url: ${{ steps.deployment.outputs.page_url }} runs-on: ubuntu-latest needs: build steps: - name: Deploy to GitHub Pages id: deployment uses: actions/deploy-pages@v3
</code></pre><p>然后重新 push 一次</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">git status 
</span></span><span class="line"><span class="cl">git add .
</span></span><span class="line"><span class="cl">git commit -m <span class="s2">&#34;add yml file&#34;</span>
</span></span><span class="line"><span class="cl">git push
</span></span></code></pre></div><p>成功后会看到 github 上有一个工作流</p>
<p><img src="https://lucas-1317635493.cos.ap-nanjing.myqcloud.com/obsidian%E5%9B%BE%E5%BA%8A/20231217153426.png" alt="image.png|300"></p>
<p>我看到有人自己开发工作流自定义的也挺不错, 如下</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yml" data-lang="yml"><span class="line"><span class="cl"><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">deploy</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">on</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">push</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">workflow_dispatch</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">schedule</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c"># Runs everyday at 8:00 AM</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">cron</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;0 0 * * *&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">jobs</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">build</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l">ubuntu-latest</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">steps</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Checkout</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l">actions/checkout@v2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">with</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                  </span><span class="nt">submodules</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                  </span><span class="nt">fetch-depth</span><span class="p">:</span><span class="w"> </span><span class="m">0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Setup Hugo</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l">peaceiris/actions-hugo@v2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">with</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                  </span><span class="nt">hugo-version</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;latest&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Build Web</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l">hugo</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Deploy Web</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l">peaceiris/actions-gh-pages@v3</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">with</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                  </span><span class="nt">PERSONAL_TOKEN</span><span class="p">:</span><span class="w"> </span><span class="l">${{ secrets.PERSONAL_TOKEN }}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                  </span><span class="nt">EXTERNAL_REPOSITORY</span><span class="p">:</span><span class="w"> </span><span class="l">xlmm/lucasloveann_blog.github.io</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                  </span><span class="nt">PUBLISH_BRANCH</span><span class="p">:</span><span class="w"> </span><span class="l">master</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                  </span><span class="nt">PUBLISH_DIR</span><span class="p">:</span><span class="w"> </span><span class="l">./public</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                  </span><span class="nt">commit_message</span><span class="p">:</span><span class="w"> </span><span class="l">${{ github.event.head_commit.message }}</span><span class="w">
</span></span></span></code></pre></div><blockquote>
<p>但是步骤会多一些，需要建立一个 token
<code>on</code> 表示 GitHub Action 触发条件，他设置了 <code>push</code>、<code>workflow_dispatch</code> 和 <code>schedule</code> 三个条件：
<code>push</code>，当这个项目仓库发生推送动作后，执行 GitHub Action
<code>workflow_dispatch</code>，可以在 GitHub 项目仓库的 Action 工具栏进行手动调用
<code>schedule</code>，定时执行 GitHub Action，如我的设置为北京时间每天早上执行，主要是使用一些自动化统计 CI 来自动更新我博客的关于页面，如本周编码时间，影音记录等，如果你不需要定时功能，可以删除这个条件
<code>jobs</code> 表示 GitHub Action 中的任务，我们设置了一个 <code>build</code> 任务，<code>runs-on</code> 表示 GitHub Action 运行环境，我们选择了 <code>ubuntu-latest</code>。我们的 <code>build</code> 任务包含了 <code>Checkout</code>、<code>Setup Hugo</code>、<code>Build Web</code> 和 <code>Deploy Web</code> 四个主要步骤，其中 <code>run</code> 是执行的命令，<code>uses</code> 是 GitHub Action 中的一个插件，我们使用了 <code>peaceiris/actions-hugo@v2</code> 和 <code>peaceiris/actions-gh-pages@v3</code> 这两个插件。其中 <code>Checkout</code> 步骤中 <code>with</code> 中配置 <code>submodules</code> 值为 <code>true</code> 可以同步博客源仓库的子模块，即我们的主题模块。
首先需要将上述 <code>deploy.yml</code> 中的 <code>EXTERNAL_REPOSITORY</code> 改为自己的 GitHub Pages 仓库，如我的设置为 <code>xlmm/lucasloveann_blog.github.io</code>。
因为我们需要从博客仓库推送到外部 GitHub Pages 仓库，需要特定权限，要在 GitHub 账户下 <code>Setting - Developer setting - Personal access tokens</code> 下创建一个 Token。</p>
</blockquote>
<p>经过上述配置，我们已经实现了 Hugo 博客本地搭建及版本管理、GitHub Pages 部署网站发布，Hugp 主题管理及更新等功能，实现了完整的系统。现在每当我们本地通过熟悉的 Markdown 语法完成博客内容编辑后，只需要推送代码，等待几分钟，即可通过我们的自定义域名访问更新后的网站。</p>
<blockquote>
<p>后记：我曾经踩过的坑</p>
<ol>
<li>直接拉取别人的库来做，无法更新，然后一直报错，所以我都直接克隆到自己的库存，后面自己维护</li>
<li>.gitmodules 文件丢失，一直不知道在哪解决，后面只能重建。</li>
<li>创建仓库的时候，先创建了 readme，然后忘记拉取到本地再同步，就同步不了。后面我直接忽略掉这个git pull origin main &ndash;allow-unrelated-histories</li>
</ol>
</blockquote>
<p>以上，就是我要分享的。</p>

            </div>
        </article></main>
</div>
<footer class="footer">
    <span class="footer_item"> </span>
    &nbsp;

    <div class="footer_social-icons">
<a href="https://github.com/xlmm" target="_blank" rel="noopener noreferrer me"
    title="Github">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path
        d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22">
    </path>
</svg>
</a>
<a href="https://twitter.com/lucasfounder" target="_blank" rel="noopener noreferrer me"
    title="Twitter">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path
        d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z">
    </path>
</svg>
</a>
<a href="index.xml" target="_blank" rel="noopener noreferrer me"
    title="Rss">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path d="M4 11a9 9 0 0 1 9 9" />
    <path d="M4 4a16 16 0 0 1 16 16" />
    <circle cx="5" cy="19" r="1" />
</svg>
</a>
</div>
    <small class="footer_copyright">
        © 2023 Lucas.
        
    </small>
</footer><a href="#" title="" id="totop">
    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentColor" stroke="currentColor" viewBox="0 96 960 960">
    <path d="M283 704.739 234.261 656 480 410.261 725.739 656 677 704.739l-197-197-197 197Z"/>
</svg>

</a>


    




    
    
        
    

    
    
        
    



    
    <script src="https://xlmm.github.io/lucasloveann.github.io/js/main.min.35f435a5d8eac613c52daa28d8af544a4512337d3e95236e4a4978417b8dcb2f.js" integrity="sha256-NfQ1pdjqxhPFLaoo2K9USkUSM30&#43;lSNuSkl4QXuNyy8="></script>

    

</body>
</html>
